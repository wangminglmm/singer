webpackJsonp([2],{"3XzQ":function(t,s,a){t.exports=a.p+"img/fail.9e7952f.png"},"4AGf":function(t,s,a){t.exports=a.p+"img/success.54563e0.png"},ADg0:function(t,s){},HI59:function(t,s,a){t.exports=a.p+"img/join-banner.e44a018.jpg"},TWtK:function(t,s,a){t.exports=a.p+"img/icon-recording.b0fe000.png"},qql7:function(t,s,a){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var e=a("mvHQ"),i=a.n(e),n=a("Dd8w"),o=a.n(n),l=a("qkow"),r=a("xoWn"),c=a("7e0o"),u={render:function(){var t=this.$createElement;return(this._self._c||t)("img",{staticClass:"img",attrs:{src:a("4AGf"),alt:""}})},staticRenderFns:[]},d=a("VU/8")(null,u,!1,null,null,null).exports,f=a("NYxO"),v={data:function(){return{title:"",showRule:!1,showResult:!1,info:{imgUrl:a("0gU3")},taskInfo:{},resultImg:a("3XzQ"),start:!1}},created:function(){var t=this.$route.query.taskInfo||"{}";this.taskInfo=JSON.parse(t),console.log(this.taskInfo),console.log(this.operateType)},computed:o()({},Object(f.b)({userInfo:"userInfo"}),{type:function(){return this.taskInfo.leader?"member":"leader"},operateType:function(){return this.taskInfo.taskId?this.taskInfo.leader?(this.title="接歌","join_member"):(this.title="接歌","join_leader"):(this.title="我要领唱",this.taskInfo.leader?"own_member":"own_leader")}}),methods:{onClickLeft:function(){this.$router.back()},onClickRight:function(){},handlePlayMusic:function(){console.log(this.taskInfo),playVoice(this.userInfo.p,this.taskInfo.leaderMusic)},handRecord:function(){var t=this;console.log(this.taskInfo);var s={act:"sing",id:this.taskInfo.taskId?this.taskInfo.taskId:this.taskInfo.songId,type:this.taskInfo.taskId?"member":"leader"};console.log(s),this.start=!0,setTimeout(function(){t.start=!0},3e3),Voice(this.userInfo.p,this.taskInfo.lyric,i()(s))},voiceCall:function(t){var s=this;this.taskInfo.taskId?(0==t.error_code?(this.resultImg=a("4AGf"),this.showResult=!0):1==t.error_code?(this.resultImg=a("3XzQ"),this.showResult=!0):this.$toast(t.msg),setTimeout(function(){s.$router.push({path:"/"})},2500)):this.$toast(t.msg)}},mounted:function(){var t=this;window.voiceCall=function(s){t.voiceCall(s)}},components:{Button:l.a,Avatar:c.a,ButtonPlay:r.a,DialogJoin:d}},_={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"container"},[e("van-nav-bar",{attrs:{title:t.title,"left-text":"","left-arrow":""},on:{"click-left":t.onClickLeft}}),t._v(" "),e("section",{staticClass:"banner"},[e("img",{attrs:{src:a("HI59"),alt:""}}),t._v(" "),e("div",{staticClass:"button-operate"}),t._v(" "),e("div",{staticClass:"btn-rule",on:{click:function(s){t.showRule=!0}}},[t._v("活动规则")])]),t._v(" "),e("div",{staticClass:"detail"},[e("div",{staticClass:"joiner"},["join_member"===t.operateType||"join_leader"===t.operateType?[e("div",{staticClass:"top"},[e("div",{staticClass:"left"},[e("Avatar",{attrs:{imgUrl:t.taskInfo.seller.avatarUrl,uid:t.taskInfo.seller.uid,nickName:t.taskInfo.seller.nickName,type:"seller"}}),t._v(" "),e("div",{staticClass:"seller-info"},[e("div",{staticClass:"seller-name"},[t._v(t._s(t.taskInfo.seller.nickName))]),t._v(" "),e("div",{staticClass:"seller-grade"},[t._v(t._s(t.taskInfo.grade))])])],1),t._v(" "),t.taskInfo.leader?e("div",{staticClass:"right"},[e("Avatar",{attrs:{imgUrl:t.taskInfo.leader.avatarUrl,uid:t.taskInfo.leader.uid,nickName:t.taskInfo.leader.nickName,type:"buyer"}}),t._v(" "),e("div",{staticClass:"buyer-info"},[e("div",{staticClass:"buyer-name"},[t._v(t._s(t.taskInfo.leader.nickName))]),t._v(" "),e("div",{staticClass:"score"},[t._v("领唱评分:"+t._s(t.taskInfo.leader.score))])])],1):t._e()]),t._v(" "),e("div",{staticClass:"bottom"},[t._l(t.taskInfo.lyricList,function(s,a){return e("div",{key:a,staticClass:"desc ellipsis"},[t._v(t._s(s))])}),t._v(" "),e("div",{staticClass:"song"},[t._v("《"+t._s(t.taskInfo.songName)+"》 "+t._s(t.taskInfo.songAuthor)+"\n              "),e("button-play",{staticClass:"play-btn",attrs:{musicUrl:t.taskInfo.leaderMusic,color:"#ff7a56"},on:{click:t.handlePlayMusic}})],1)],2),t._v(" "),e("div",{staticClass:"status"},[e("span",{staticClass:"time"},[t._v("剩余时间："+t._s(t._f("formatSeconds")(t.taskInfo.remainTime)))]),t._v(" "),e("span",{staticClass:"jinbi"},[t._v("剩余金币："+t._s(t.taskInfo.remainGold))])])]:"own_leader"===t.operateType?[e("div",{staticClass:"own-leader"},[e("div",{staticClass:"bottom"},[t._l(t.taskInfo.lyricList,function(s,a){return e("div",{key:a,staticClass:"desc ellipsis"},[t._v(t._s(s))])}),t._v(" "),e("div",{staticClass:"song"},[t._v("《"+t._s(t.taskInfo.songName)+"》 "+t._s(t.taskInfo.songAuthor)+"\n                "),e("button-play",{staticClass:"play-btn",attrs:{musicUrl:t.taskInfo.leaderMusic,color:"#ff7a56",text:"原唱"},on:{click:t.handlePlayMusic}})],1)],2)])]:"own_member"===t.operateType?[e("div",{staticClass:"own-member"},[t.taskInfo.leader?e("div",{staticClass:"top"},[e("Avatar",{attrs:{imgUrl:t.taskInfo.leader.avatarUrl,uid:t.taskInfo.leader.uid,nickName:t.taskInfo.leader.nickName}}),t._v(" "),e("div",{staticClass:"buyer-info"},[e("div",{staticClass:"buyer-name"},[t._v("当前领唱人："+t._s(t.taskInfo.leader.nickName))]),t._v(" "),e("div",{staticClass:"score"},[t._v("领唱评分："+t._s(t.taskInfo.leader.score))])])],1):t._e(),t._v(" "),e("div",{staticClass:"bottom"},[t._l(t.taskInfo.lyricList,function(s,a){return e("div",{key:a,staticClass:"desc ellipsis"},[t._v(t._s(s))])}),t._v(" "),e("div",{staticClass:"song"},[t._v("《"+t._s(t.taskInfo.songName)+"》 "+t._s(t.taskInfo.songAuthor)+"\n                "),e("button-play",{staticClass:"play-btn",attrs:{musicUrl:t.taskInfo.leaderMusic,color:"#ff7a56"},on:{click:t.handlePlayMusic}})],1)],2)])]:t._e(),t._v(" "),e("img",{staticClass:"icon-recording",attrs:{src:a("TWtK"),alt:""},on:{click:t.handRecord}})],2)]),t._v(" "),e("van-popup",{attrs:{"overlay-class":"popup-rule"},model:{value:t.showRule,callback:function(s){t.showRule=s},expression:"showRule"}},[e("div",{staticClass:"rule"},[e("div",{staticClass:"title"},[t._v("游戏规则")]),t._v(" "),e("p",[t._v("1.用户可以发布唱歌打赏，可限制男女参加。其他用户唱对歌曲可领到相应的奖励。")]),t._v(" "),e("p",[t._v("2.每人每首歌曲只有一次演唱机会，如果失败，将无法获得奖励")]),t._v(" "),e("p",[t._v("3.打赏的时间有效期为20分钟,超过20分钟,打赏结束,未领取完的金币自动退回到发布者的账户。")]),t._v(" "),e("p",[t._v("4.为了防止占坑,发布的用户可以选择私密打赏设置密码,也可在“我发布的打赏”中，点击用户头像，即可禁止该用户参加你的打赏。")]),t._v(" "),e("div",{staticClass:"close",on:{click:function(s){t.showRule=!1}}},[e("img",{attrs:{src:a("wOFH"),alt:""}})])])]),t._v(" "),e("van-popup",{attrs:{"overlay-class":"popup-rule"},model:{value:t.showResult,callback:function(s){t.showResult=s},expression:"showResult"}},[e("div",{staticClass:"result-img"},[e("img",{attrs:{src:t.resultImg,alt:""}})])])],1)},staticRenderFns:[]};var k=a("VU/8")(v,_,!1,function(t){a("ADg0"),a("tc0r")},"data-v-2e13e9a5",null);s.default=k.exports},tc0r:function(t,s){}});
//# sourceMappingURL=2.7a93c2dbc79bce504346.js.map